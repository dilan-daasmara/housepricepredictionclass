import streamlit as st
import pandas as pd
import joblib
import numpy as np

def map_number_to_category(number):
    if number == 0:
        return 'High'
    elif number == 1:
        return 'Low'
    elif number == 2:
        return 'Luxury'
    elif number == 3:
        return 'Medium'
    elif number == 4:
        return 'Very High'
    else:
        return None  # Untuk menangani angka yang tidak dikenali

# load models
rf_model = joblib.load(open('Models/rf_model.pkl', 'rb'))
xgb_model = joblib.load(open('Models/xgb_model.pkl', 'rb'))
nn_model = joblib.load(open('Models/nn_model.pkl', 'rb'))

# load scaler
scaler = joblib.load(open('Models/scaler.pkl', 'rb'))

# load label encoder
label_encoder = joblib.load(open('Models/label_encoder.pkl', 'rb'))

# Title and description
st.title("House Price Prediction Viewer")
st.write("Aplikasi ini memperlihatkan prediksi kelas berdasarkan harga rumah.")

# sidebar
st.sidebar.title("Input Data Properti")
def user_input_features ():
    area = st.sidebar. number_input("Luas Properti (m)", min_value=50, max_value=500, value=100)
    bedrooms = st.sidebar.slider ("Jumlah Kamar Tidur", 1, 10, 3)
    bathrooms = st.sidebar.slider("Jumlah Kamar Mandi", 1, 5, 2)
    city = st.sidebar.selectbox("Kota", ['Islamabad', 'Lahore', 'Faisalabad', 'Rawalpindi', 'Karachi'])
    location = st.sidebar.selectbox("Lokasi", 
                                    ['Amin Town', 'Tajpura', 'Hassan Town', 'Sarai Kharbuza', 'Bin Qasim Town', 'Dhok Elahi Baksh', 'Bilal Town', 'Mauripur Road', 'Kahuta Road', 'Zaitoon - New Lahore City', 'Gulshan-e-Rafique', 'Latif Garden', 'Kacheri Chowk', 'Mangral Town', 'Nadeem Town', 'Gulshan-e-Ahbab', 'Ichhra', 'Khanna Pul', 'Khayaban Colony', 'GOR', 'D-13', 'Khaliq-uz-Zaman Road', 'Bakra Mandi', 'Pir Sohawa', 'Ilahi Abad', 'Faisal Gardens', 'Shah Kamal Road', 'Gulshan-e-Saeed', 'Khayaban-e-Quaid', 'Lyari Expressway', 'Jati Umra Road', 'Shah Faisal Road', 'Intelligence Colony', 'Ali View Park', 'Zubair Colony', 'Abdullah Garden', 'Gulistan-e-Jauhar', 'Chakri', 'Bath Island', 'Ferozepur Road', 'Dilawar Colony', 'Chauburji Chowk', 'Kuri Model Town', 'Scheme 45', 'Askari 5', 'Ibn-e-Sina Road', 'Karim Town', 'Garrison Homes', 'Lahore - Sheikhupura - Faisalabad Road', 'Tarnol', 'Raja Akhtar Road', 'New Green Town', 'Koral Town', 'Cantt View Society', 'Dhok Naju', 'Bagh Sardaran', 'Azmat Town', 'Gulshan Dadan', 'F-15', 'Westridge', 'Gulshan-e-Zaheer Colony', 'Bahria Education & Medical City', 'Zulfiqar Colony', 'Tulspura', 'Muslim Nagar Housing Scheme', 'Chungi Amar Sadhu', 'Girja Road', 'Munawar Colony', 'Jaranwala Road', 'Tezab Mill Road', 'Nooriabad', 'Fateh Jang Road', 'New Canal Park', 'Daewoo Road', 'Green Avenue', 'Diglus Pura', 'Ittifaq Town', 'PIA Main Boulevard', 'Capital Enclave', 'Aiza Garden', 'Khana Kacha Road', 'G-7', 'Amil Colony', 'Air Avenue City', 'National Highway', 'Shalimar Park', 'Top City 1', 'Badami Bagh', 'Sally Town South', 'Sue-e-Asal', 'Old Ravians Co-Operative Housing Society', 'Batapur', 'Montgomery Road', 'Sindh Industrial Trading Estate (SITE)', 'Amarpura', 'Johar Town', 'Walton Railway Officers Colony', 'Muqaddas Park', 
                                    'Hameedpura', 'Sadaat Town', 'Saggian Wala Bypass Road', 'Askari 13', 'Naval Colony', 'Mozang', 'Saddar', 'Landhi', 'New Muslim Town', 'Nussah Town', 'Jora Pull', 'Audit & Accounts Housing Society', 'Anda Mor Road', 'Shahzad Colony', 'Muzaffar Colony', 'Rehmania Town', 'Islamabad, Islamabad Capital', 'Canal Road', 'Officers Colony', 'Sabzazar', 'Peer Colony', 'Media Town', 'Gulshan-e-Hayat', 'Shanghai Road', 'Marghzar Officers Colony', 'Shah Town', 'University Town', 'Zia Colony', 'Kuri Road', 'Bismillah Housing Scheme', 'Saifabad', 'Gujjar Chowk', 'Green City', 'New Afzal Town', 'Nain Sukh', 'Shalimar Housing Scheme', 'P & D Housing Society', 'Singhpura', 'H-12', 'Federal Government Employees Housing Foundation', 'Amir Town', 'Canal Bank Housing Scheme', 'Airport Housing Society', 'New Shah Kamal Colony', 'Khalid Abad', 'Al Jameel Housing Scheme', 'Ahlu Road', 'Akalgarh', 'Jaffar Town', 'Tariq Gardens', 'Rawat', 'Gulshan-e-Rehman', 'Manzoor Colony', 'Peoples Colony No 2', 'F-9', 'National Police Foundation O-9', 'Wah Link Road', 'Sultan Colony', 'Pindora', 'Naval Anchorage', 'Rawat Industrial Estate', 'Revenue Society', 'PAF Society', 'Makkah Garden', 'Hawks Bay Scheme 42', 'Kahna Kacha', 'Shahpur Kanjra', 'Raza Abad', 'Dhok Kala Khan', 'Aisha Manzil', 'PIDC', 'Ameen Town', 'Faisalabad Sangla Hill Road', 'Green Park Society', 'Ravi Gardens', 'Mominpura Road', 'Farooq-e-Azam Road', 'Gulshan-E-Mustafa Housing Society', 'Bankers Co-operative Housing Society', 'Jinnah Colony', 'Daniyal Town', 'Askari 3', 'Aslam Shaheed Road', 'Combo Colony', 'Al Hamra Town', 'Chah Miran', 'Frere Town', 'Rachna Town', 'Ghauri Town', 'DHA City', 'Mehar Fayaz Colony', 'Agha Shahi Avenue', 'G-6', 'Umair Town', 'Ismail Valley', 'Pindorian', 'Ring Road', 'Punjab Govt. Servants Housing Foundation', 'Ahmed Town', 'Gulshan-e-Khudadad', 'Eden Gardens', 'Kacha Ferozepur Road', 'Gadap Town', 'Bait-ul-Raza Colony', 'Park View', 'Victoria Heights', 'Ashraf Colony', 'Rail Town (Canal City)', 'Zaitoon Colony', 'Dhok Paracha', 'Army Officers Colony', 'Anarkali', 'Khurrianwala Town', 'Sitara Valley', 
                                    'Thanda Pani', 'Jinnah Avenue', 'Burj Mandi', 'Korangi Road', 'Saima Luxury Homes', 'PTV Colony', 'Ali Abad', 'Chakri Road', 'Madina Colony', 'Mushtaq Park - Phase 3', 'Gohawa', 'Friends Colony', 'Amir Khusro', 'Sihala Valley', 'Samanabad', 'Gatwala Park Road', 'Gulshan-e-Areesha', 'FECHS', 'Raja Bazar', 'Afshan Colony', 'Expo Avenue Society', 'Lakhu Road', 'Shershah Colony - Ichra', 'Khayaban Colony 2', 'Capital Awami Villas', 'Britto Road', 'Mason Road', 'Rustam Park', 'Shaheed-e-Millat Expressway', 'Nawab Town', 'I-14', 'Lalazar 2', 'Judicial Colony', 'Allama Iqbal Intl Airport', 'Narwala Road', 'Others', 'Dhoke Munshi Khan', 'Islamabad - Murree Expressway', 'Al Rehmat Villas', 'Sihala', 
                                    'PAF Housing Scheme', 'Hill Park', 'Manga Mandi', 'Holy Family Road', 'Peco Road', 'Aitchison Society', 'Al-Kareem Premier Housing Scheme', 'Ranchore Line Bazar', 'Sheraz Town', 'Jamil Town', 'Al Rahim Homes', 'Liaquat Colony', 'Illahi Abad', 'Ahmadabad', 'Davis Road', 'Diamond City', 'Wafaqi Colony', 'Diplomatic Enclave', 'Adan Villas', 'Waris Pura', 'Qadri Colony', 'Defence Fort', 'Mughalpura', 'Samanabad Road', 'Murree Road', 'Lawyers Housing Society', 'Beaumont Road', 'New Shakrial', 'Susan Road', 'Rajpoot Town', 'Alfalah Town', 'Sher Shah Suri Road', 'Falcon Complex Faisal', 'Sitara Sapna City', 'Gulbahar Scheme', 'LDA City', 'Al Faisal Town', 'Sir Syed Chowk', 'Rewaz Garden', 'Qamar Garden', 'Outfall Road', 'Baghbanpura', 'Bostan Valley', 'Sadiqa Abad', 'Shoukat Town', 'Sukh Chayn Gardens', 'Askari 8', 'Ali Housing Colony', 'Rufi Rose Petals', 'Salamatpura', 'Garden West', 'Islamabad View Valley', 'DHA 11 Rahbar', 'Millat Road', 'Rawat Enclave', 'Sarwar Road', 'Faisal Town - F-18', 'Mediacom Avenue', 'Nighabanpura', 'Gulshan-e-Iqbal', 'Al-Manzar Society', 'Capital Smart City', 'Khaira', 'PTV Society', 'Delhi Colony', 'Misryal Road', 'Cavalry Ground', 'Al Fayaz Colony', 'Mian Colony', 'UET Housing Society', 'Eden', 'Lawrence Road', 'Gulshan-e-Malir', 'Sitara Supreme City', 'Qilla Gujjar Singh', 'Super Highway', 'Pakistan Intelligence Bureau Housing Society', 'Zamzama', 'Ali Alam Garden', 'Azizabad', 'Allama Iqbal Colony', 'River View Coop Housing Society', 'Abdullah Town', 'Mian Amiruddin Park', 'Tarogill', 'Al-Falah Cooperative Housing Society', 'Lytton Road', 'Airport Avenue Housing Society', 'Ahmad Avenue', 'Sunderdas Road', 'Tipu Road', 'Lahore - Jaranwala Road', 'E-11', 'State Life Housing Society', 'Airport Enclave', 'Liaquat Bagh', 'Askari', 'Defence Road', 'Green Cap Housing Society', '12th Avenue', 'Judicial Town', 'Maskan Chowrangi', 'Chaudhary Colony', 'Haji Abad', 'New Super Town', 'Saidpur Road', 'Ghausia Colony', 'Dubai Town', 'Islamabad Colony', 'Asif Colony', 'Bhatti Colony', 'Harbanspura', 'Taj Bagh Scheme', 'Haji Chowk', 'Chak 209 RB Akalgarh', 'Karachi Motorway', 'Shalimar Link Road', 'Mohammadi Colony', 'Babar Colony', 'Rufi Lake Drive Apartments', 'Manawala', 'Nizamabad', 'Police Foundation Housing Society', 'E-12', 'Transformer Chowk', 'Professors Colony', 'Abid Town', 'Lahore Villas', 'Tench Road', 'Northern Bypass', 'NFC 1', 'H-13', 'F-17', '204 Chak Road', 'D-14', 'Gawal Mandi', 'Madina Homes', 'Mansoorabad', 'G-16', 'Munianwala', 'Data Ganj Bakhsh Town', 'Millat Town', 'Steam Power Station Colony', 'Canal Garden', 'Gulshan-e-Jami', 'KDA Scheme 1', 
                                    'Gulshan-e-Yaseen Housing Society', 'Sangar Town', 'Nadeem Shaheed Road', 'Khayaban-e-Faisal', 'Kot Lakhpat', 'Manghopir Road', 'Al Huda Town', 'Shah Khawar Town', 'Azeem Garden Shahdara', 'Naseerabad', 'Green Acres Housing Society', 'Gulshan-e-Ali Housing Scheme', 'Airport', 'Chen One Road', 'Gulnishan Park', 'Raheemabad', 'Islamabad Farm Houses', 'Garhi Shahu', 'Azeem Town', 'Bahria Town Rawalpindi', 'McLeod Road', 'Mohni Road', 'Askari 4', 'Jameel Town', 'Gosha-e-Ahbab', 'Chattar', 'Sui Gas Employees Cooperative Housing Society', 'Commercial Market', 'Ibrahim Colony', 'Jamaluddin Afghani Road', 'Guru Mandir Chorangi', 'Ayub Colony', 'Wyeth Employees Coop Housing', 'Dholanwal', 'Airport Road', 'PCSIR Housing Scheme', 'Lalazar', 'Tarlai', 'Chohan Road', 'Mian Mir Colony', 'Wazir Town', 'Baldia Town', 'Punjab University Employees Society', 'Askari 2', 'H-11', 'FDA City', 'Paradise Valley', 'Punjab Govt Servant Society', 'Naya Nazimabad', 'Model Town Humak', 'Siddiqia Colony', 'New Katarian', 'Raiwind Road', 'G-10', 'Gulzar E Ahbab Society', 'Al-Raheem Garden', 'Islam Nagar', 'Eden Place Housing Scheme', 'Embassy Road', 'Chungi No. 22 Road', 'Race Course', 'High Court Road', 'Habibullah Road', 'Misri Shah', 'Canalberg Housing Society', 'Lasani Town', 'Park View City', 'Rifle Range Road', 'Cotton Export Cooperative Housing Society', 'Askari 14', 'Beadon Road', 'Johar Colony', 'AGHOSH', 'Lahore Canal Bank Cooperative Housing Society', 'Sanda', 'Athal', 'Valencia Gardens', 'Punjab Chowrangi', 'Spring Valley', 'Lahore, Punjab', 'Gulshan-e-Amin', 'Chapal Skymark', 'Shahra-e-Liaquat', 'Shershah Colony - Raiwind Road', 'Multan Road', 'Khayaban-e-Tanveer', 'Bilal Colony', 'Wapda City', 'Royal City', 'Fateh Garh', 'Caltex Road', 'Al Jannat Housing Scheme', 'Sajid Garden', 'Azadi Chowk', 'Times Residency', 'PASSCO Housing Society', 'I-10', 'Mall Road', 'Laraib Garden', 'Shahtaj Colony', 'Defence View Society', 'Gulshan-e-Usman Housing Society', 'Kamal Abad', 'Upper Mall', 'Liaqat Road', 'Eid Gah Road', 'Sahianwala', 'Dhok Kashmirian', 'Pakki Thatti', 'Chak 208 RB Dogranwala', 'Ali Pur', 'Sarafa Bazar', 'Saqib Town', 'Tariq Road', 'Al Haram Garden', 'New Lalazar', 'Al-Wahab Garden - Phase 1', 'New Airport Town', 'Rehman Town', 'Burma Town', 'Altaf Hussain Road', 'Khayaban-e-Amin', 'Gulshan-e-Umair', 'Chandni Chowk', 'Faisal Ghuman Road', 'PAEC Employees Cooperative Housing Society', 'Tulsa Road', 'Royal Residencia', 'Simly Dam Road', 'Jhumra Road', 'China Scheme', 'Eden Valley', 'Magistrate Colony', 'Quaid-e-Azam Park', 'Catholic Colony', 'Pak Park', 'Affandi Colony', 'Green View Colony', 'Munir Garden', 'Canal View', 'Korangi', 'Nawaban Wala', 'Kamran Chowrangi', 'Mahmoodabad', 'Saddar Town', 'Abdali Road', 'Rehman Gardens', 'Shah Khalid Colony', 'IJP Road', 'Navy Housing Scheme Karsaz', 'Harley Street', 'Fazal Town', 'Samsani Road', 'Gobal Town', 'Rail View Housing Society', 'Qayyumabad', 'Khokhar Town', 'Bahar Colony', 'Altaf Colony', 'Dastgir Colony', 'Al-Safaa Garden', 'Dhandharan Chak 66 JB', 'Sultan Pura', 'Lahore Motorway City', 'Gajju Matah', 'Saadi Road', 'Askari 11', 'PAF Tarnol', 'Bagarian', 'Akbar Colony', 'Lehtarar Road', 'Al-Kabir Town', 'Partab Nagar', 'Super Town', 'PCSIR Staff Colony', 'Gulistan Colony', 'Immad Garden Housing Scheme', 'Raza Garden', 'BOR - Board of Revenue Housing Society', 'Chaudhary Jan Colony', 'Chaman Park', 'Public Health Society', 'GT Road', 'Chibban', 'Muslimabad Society', 'Jamal Homes', 'Al Hafeez Gardens', 'Sufiabad', 'Tench Bhata', 'Saadat Avenue', 'Lakhodher', 'River Garden', 'Rehmanpura (Harbanspura)', 'Zaman Colony', 'G-12', 'Gulistan Colony No 2', 'Dhoke Dalal Road', 'Chak 8 JB Punj Garain', 'Zafar ul Haq Road', 'Pak Arab Housing Society', 'Gulberg Town', 'Lasani Garden', 'Kashmir Road', 'Engineering Co-operative Housing (ECHS)', 'Queens Road', 'Al-Haram City - Phase 2', 'New Garden Town', 'Tariqabad', 'Baba Fareed Road', 'Paragon City', 'Sir Syed Town', 'Bilal Gunj', 'Qartaba Chowk', 'Dhoke Syedan', 'College Road', 'Education Town', 'Kaleem Shaheed Colony No 1', 'Noor Jahan Road', 'Government Employees Cooperative Housing Society (GECHS)', 'Rehman Villas', 'Rehman Housing Society', 'P & T Colony', 'Dhok Babu Irfan', 'T & T Aabpara Housing Society', 'Toheed Park', 'Dhanola', 'Lahore - Islamabad Motorway', 'Rabbani Colony', 'Damba', 'Kahuta Triangle Industrial Area', 'Lower Mall', 'Hanif Park Harbanspura', 'Mehmoodabad', 'Ranial', 'Ahmad Housing Society', 'Asim Town', 'Bokra Road', 'Ghalib City', 'Bhogiwal', 'Eden Park', 'Bahadurabad', 'Meherban Colony', 'CBR Town Phase 2', 'Gulfishan Town', 'Garja', 'Zone 5', 'Clifton', 'Nabha Road', 'Khawaja Islam Road', 'Ideal Homes Society', 'Askari 10', 'North Nazimabad', 'Dubban Pura', 'West Wood Housing Society', 'UBL Housing Society', 'Central Avenue', 'Suhail Abad', 'D Ground', 'Cricketer Villas', 'Asghar Mall Road', 'Land Breeze Housing Society', 'Mehmood Booti', 'Kharak', 'PIA Housing Scheme', 'Zubaida Park', 'Al-Hafiz Town', 'Niamuana Bypass Road', 'Sant Nagar', 'Railway Road', 'Izmir Town', 'Santpura', 'I-8', 'E-18', 'Sanda Road', 'New Samanabad', 'F-10', 'Airline Avenue', 'IBL Housing Scheme', 'Shah Faisal Town', 'Youhanabad', 'Iqbal Park', 'Gulshan Colony', 'Naz Town', 'Aabpara Coop Housing Society', 'Imran Road', 'Ameer-ud-Din Park', 'Abdullah Haroon Road', 'Railway Scheme 9', 'Eden Villas', 'Manga - Raiwind Road', 'Bankers Colony', 'Kaleem Shaheed Colony No 2', 'C-18', 'Chinar Bagh', 'Hakim Muhammad Ajmal Khan Road', 'Bostan Road', 'Nemat Colony No 1', 'Gulshan Farooq Scheme', 'Gadap Road', 'Tipu Sultan Road', 'Dream Avenue Lahore', 'ASF Tower', 'Motorway City', 'Khayaban-e-Ittehad Road', 'Divine Homes', 'Jhangi Syedan', 'D-17', 'Sui Gas Housing Society', 'Ashraf Garden', 'Gulshan-e-Millat', 'Qasurpura', 'Infantry Road', 'Chenab Gardens', 'Fateh Villas', 'Alpha Society', 'Karakoram Diplomatic Enclave', 'Islamabad Highway', 'F-7', 'Gulshan-E-Iqbal', 'G-8', 'Marir Hassan', 'I-9', 'Al-Hilal Society', 'Sitara Colony', 'I-12', 'Model Colony', 'Poonch Road', 'Shadman 1', 'Amer Pura', 'EME Society', 'Al Rehman Garden', 'Zero Point', 'Chakbeli Road', 'Waris Colony', 'Pakistan Town', 'Dhok Mangtal', 'Walled City', 'Korang Town', 'Nishatabad', 'Allahabad Road', 'Sarwar Town', 'Dharampura', 'Cosmopolitan Society', 'Jhang Road', 'Jalal Colony', 'Punjab Colony', 'Ittehad Colony', 'Park Enclave', 'Lalkurti', 'Heir', 'Chak Shahzad', 'Al-Amin Housing Society', 'Begum Kot', 'Farid Court Road', 'F-6', 'Pir Naseer', 'Police Foundation Housing Scheme', 'Sabzazar Scheme', 'ASF Housing Scheme', 'Kiran Villas', 'Fort Villas', 'Vital Homes Housing Scheme', 'Chauburji Park Road', 'North Karachi', 'Jaranwala', 'Al-Raziq Garden', 'Labor Colony', 'Wahdat Colony', 'Tali Mori', 'Gulshan-e-Habib', 'Muslim Town', 'Zaheer Villas', 'Hassan Villas', 'Model Town', 'Stadium Road', 'Shams Abad', 'Banaras Colony', 'Punjab Coop Housing Society', '9th Avenue', 'Dhok Gujran', 'Hub River Road', 'Abdullah City', 'Mustafa Town', 'Nawaz Colony', 'Al Fajar Society', 'Khuda Ki Basti', 'Babu Sabu', 'MT Khan Road', 'Ferozepur City', 'Arsalan Town', 'Shehzad Town', 'Askari 15', 'Shalimar Town', 'Eden Orchard', 'Shuja Road', 'Satiana Road', 'Gulistan Colony No 1', 'Four Season Housing', 'Jewa Town', 'Bahria Nasheman', 'Defence Colony', 'Jhang Syedan', 'NHA Housing Society', 'Rawalpindi, Punjab', 'Waris Khan', 'Karim Park', 'AR Cottages', 'Nishat Colony', 'Dhoke Khabba', 'Sherwani Town Housing Scheme', 'Mumtaz Colony', 'Naval Housing Scheme', 'Valencia Housing Society', 'Tumair', 'Karbath', 'Cantt', 'Dhoke Gangal', 'Gawalmandi', 'Harbanspura Road', 'Gulgasht Colony', 'Saeed Colony', 'Qasim Abad', 'Canal Burg', 'Ravi Road', 'I. I. Chundrigar Road', 'Al Qaim Town', 'New Karachi', 'Civil Defence', 'Chak Jhumra', 'Mateen Avenue', 'Federal B Area', 'Erum Villas', 'Zaraj Housing Scheme', 'Naveed Garden', 'Partal Town', 'Garden Colony', 'Ameen Park', 'Jagiot Road', 'Golra Road', 'Old Queens Road', 'Abid Market', 'PECHS', 'Sami Town', 'Badar Colony', 'G-13', 'Ashrafi Town', 'Railway Officers Colony', 'Saggian', 'Al-Hamd Garden', 'Airline Housing Society', 'Lawyers Society', 'Saman Berg', 'Chanman Abad', 'Liaquatabad', 'Orangi Town', 'Sharaqpur Road', 'Javed Bahria Coopretive Housing Society', 'Gulshan e Madina', 'Younas Town', 'Adiala Road', 'Makkah Colony', 'Ali Garden', 'Askari 9', 'H-8', 'Swami Nagar', 'Ali View Garden', 'Multi Residencia & Orchards', 'Rajgarh Road', 'Royal Avenue', 'Fazaia Colony', 'Gulberg', 'Civil Lines', 'New Chauburji Park', 'Zeeshan Colony', 'Rehmanpura (Ferozpur Road)', 'Dheri Hassanabad', 'Chak 279/RB Kalan', 'Ravi Park', 'Sadiqabad', 'DHA City Karachi', 'Highcourt Society', 'Main Canal Bank Road', 'Angoori Bagh', 'Ismail City', 'HBFC Housing Society', 'Soan Garden', 'Guldasht Town', 'Dhoke Ratta', 'Green Park', 'Firdous Colony', 'PIA Colony', 'Chakra', 'Rehan Garden', 'Al Noor Garden', 'Allama Iqbal Town', 'Bhagatpura', 'Lyari Town', 'Bedian Road', 'KRL Road', 'Jallo Park Road', 'Rehmanabad', 'Yazdani Road', 'Lines Area', 'Ghous-e-Azam Road', 'Gulberg Valley', 'Chaudhary Wilayat Khan Road', 'Bahria Town', 'Pir Wadhai', 'Liaquat Town', 'Canal Expressway', 'Jia Baga Road', 'Grand Avenues Housing Scheme', 'Morgah', 'Shah Di Khoi', 'Sheikhupura Road', 'Chur Chowk', 'Gorakhpur', 'Qutbal Town', 'Khudadad Colony', 'Taramrri', 'Koral Chowk', 'Iqbal Town', 'Dhok Chiragh Din', 'Agrics Town', 'Kahuta', 'Mumtaz City', 'F-11', 'Peshawar Road', 'Sultan Town', 'Gul-e-Damin', 'Al-Hamad Colony (AIT)', 'Chauburji', 'Rashid Minhas Road', 'Sher Shah Road', 'Babuwala', 'Bahria Orchard', 'Korang Road', 'Dhudi Wala', 'Empress Road', 'Kallar Syedan', 'Faisal Valley', 'Military Accounts Housing Society', 'Temple Road', 'Allama Iqbal Road', 'Kalma Chowk', 'Azam Gardens', 'Golra Mor', 
                                    'Humaira Town', 'G-14', 'Green Town', 'Nai Abadi Harbanspura', 'Bani Gala', 'Wapda Town', 'Kashmir Highway', 'OPF Housing Scheme', 'Royal Defence Tower', 'Siraj-ud-Daula Road', 'Scheme 33', 'Mian Aziz Garden', 'Millat Colony', 'Gizri', 'Nishtar Road (Lawrence Road)', 'Rizwan Garden Scheme', 'Wassanpura', 'Liaquat Avenue', 'Walait Homes', 'circular road', 'Chapal Uptown', 'Ashiana-e-Quaid Housing Scheme', 'State Bank of Pakistan Staff Co-Operative Housing Society', 'Khayaban-e-Jinnah Road', 'Formanites Housing Scheme', 'Ideal Town', 'Kot Khawaja Saeed', 'Sahafi Colony', 'Kacha Jail Road', 'Township', 'Saadi Park', 'Canal Park', 'Sunflower Housing Society', 'Chatha Bakhtawar', 'Hajveeri Town', 'Committee Chowk', 'Shadipura', 'Alia Town', 'Lahore - Kasur Road', 'Officer Colony', 'Phulgran', 'Malir Housing Scheme 1', 'Defence Fort Housing Scheme', 'Rehman City - Phase 4', 'Jail Road', 'Afzal Park', 'PWD Housing Scheme', 'Old Clifton', 'Makki Complex', 'Humak', 'Pakistan Chowk', 'Lahore Medical Housing Society', 'Blue Area', 'Dhamyal Road', 'Gulshan Rehman', 'LDA Avenue', 'Sakhi Hassan Chowrangi', 'Cricket Stadium Road', 'Kehkishan Colony No 1', 'D-12', 'Clifton Colony', 'Jan Muhammad Road', 'People Colony', 'Canal Fort II', 'Judicial Employees Coop Housing Society', 'Riwaz Garden', 'Falaknaz Presidency', 'Defence Garden', 'Dhoke Hassu', 'Kuri', 'Gulshan-E-Faisal', 'Punjab Govt Employees Society', 'NFC 2', 'Azam Town', 'Gulistan-e-Jinnah Colony', 'Real Cottages', 'Bhatta Chowk', 'Malir Link To Super Highway', 'Shama Road', 'Dr Daud Pota Road', 'Range Road', 'Kartar Pura', 'Jaffaria Colony', 'Dhok Mustaqeem Road', 'Faisal Colony', 'D-18', 'Raja Colony', 'Chak Bahga', 'Nishtar Colony', 'Kashmir Colony', 'Haji Park Housing Scheme', 'Murababad', 'Saroba Gardens Housing Society', 'Doctors Housing Society', 'Prime Homes 1', 'Shaheed Millat Road', 'Chah Sultan', 'TECH Society', 'C-14', 'Shahra-e-Qaideen', 'Shaheen Town', 'Raj Garh', 'Royal Garden', 'Dalmia Cement Factory Road', 'Farooq Colony', 'Shahdara', 'Palm Villas', 'Khalid Bin Walid Road', 'Bhaini Road', 'Rawal Town', 'Nazir Garden Society', 'Lower Canal Road', 'PWD Road', 'Siddiqia Mill Colony', 'Sunny Park', 'C-19', 'Bhogiwal Road', 'Al Madina Avenue', 'Hanjarwal', 'Gulfishan Colony', 'Surti Muslim Co-Operative Housing Society', 'Siddiqia Society (College Road)', 'Kachupura', 'Shahra-e-Faisal', 'The Springs', 'Janjua Town', 'Qasimabad', 'Lalarukh Colony', 'Etawa Society', 'Atari Saroba', 'Police Society', 'Architects Engineers Housing Society', 'BMCHS', 'Supreme Villas', 'Jallo', 'Kemari Town', 'Prem Nagar', 'Shah Allah Ditta', 'Nisar Colony', 'Rehman Pura', 'Taj Colony', 'Kurri Road', 'Citi Housing Society', 'Bakar Mandi Road', 'Islampura', 'PWD Colony', 'Al-Jadeed Residency', 'Jarahi', 'Tricon Village', 'Gulshan Abad', 'Falaknaz Dynasty', 'Kahna', 'Aashiana Road', 'Shadbagh', 'Nazimabad', 'National Police Foundation', 'National Town', 'Vista Homes', 'Punjab Government Servant Housing Foundation (PGSHF)', 'Jamshed Town', 'Nazim-ud-din Road', 'Safari View Residencia', 'Al Barkat Villas', 'Golimar', 'Maqboolabad Society', 'Al Jalil Garden', 'Rana Town', 'Begampura', 'Nasheman-e-Iqbal', 'Jhanda Chichi', 'Dhok Sayedan Road', 'Gulshan-e-Iqbal Town', 'Daroghewala', 'City Villas', 'Shadab Colony', 'Lahore Press Club Housing Scheme', 'Gizri Road', 'Baloch Colony', 'Aman Town', 'Gulshan View Residence Society', 'Bhara kahu', 'Hamza Town', 'Gujjar Colony', 'F-8', 'Alipur Farash', 'Al-Hafeez Garden Road', 'Venus Housing Scheme', 'Lake City', 'I-11', 'E-16', 'Eastridge Housing Scheme', 'Mohlanwal Road', 'Khayaban-e-Zohra', 'Sher Zaman Colony', 'Green Hills Housing Scheme', 'Habib Homes', 'Gatwala Chowk', 'Askari 12', 'Rehman Park', 'Gul Kali', 'Askari 7', 'Gulshan-e-Ravi', 'Thokar Niaz Baig', 'Ryaz ul Jannah', 'Thalian', 'Akbar Town', 'Gul Colony', 'Gulshan Park', 'Kamahan Road', 'Manawan', 'Waris Road', 'G-5', 'Ghulam Mohammad Abad', 'Mangopir', 'Islamia Park', 'Qazi Town', 'E-7', 'Mohlanwal', 'Kehkishan Colony No 2', 'I-16', 'Air Force Housing Society', 'Chakra Road', 'Abdalians Cooperative Housing Society', 'Hoshang Road', 'Shah Jamal', 'Hakim Town', 'AWT Army Welfare Trust', 'Hudiara', 'Kohinoor City', 'Satellite Town', 'Lahore Garden Housing Scheme', 'Aria Mohalla', 'Madina Gardens', 'Ayub National Park', 'Ataturk Avenue', 'Bahria Town Karachi', 'Sunfort Gardens', 'Ghous Garden', 'Gulistan Fatima Colony', 'Sozo Town', 'Beacon House Society', 'Tariq Ismail Road', 'Shadman 2', 'Usman Town', 'Al Noor Town', 'TIP Housing Society', 'Shalley Valley', 'University Road', 'Hassan Goth', 'Kohinoor Town', 'Rabia City', 'Bawa Chack 120 JB', 'Farooqabad', 'Teachers Society', 'Motorway Chowk', 'Park View Villas', 'Sea View Apartments', 'Krishan Nagar', 'Rawal Road', 'Kotli Abdur Rahman', 'Eden Avenue Extension', 'Jhaal Chowk', 'Abdullahpur', 'Malipura', 'Bankers Town', 'Abul Hassan Isphani Road', 'Sangjani', 'Teacher Society', 'E-14', 'Shahkam Chowk', 'Dream Villas', 'Millat Chowk', 'Wocland Villas', 'Wahdat Road', 'Divine Gardens', 'NIH Colony', 'Bagh-e-Korangi', 'Shahra-e-Jahangir', 'Sheikh Colony', 'Harchan Pura', 'Afghanabad', 'Gulshan-e-Safeer', 'Gulbahar Park', 'Peer Meher Ali Shah Town', 'H-15', 'Mian Zulfiqar Ali Shahid Road', 'B-17', 'Ahbab Colony', 'Gulbahar Colony', 'Ismail Green Valley', 'Fazaia Housing Scheme', 'Wapda Colony', 'Abu Alkhair Road', 'Garden Town', 'G-11', 'Sham Nagar', 'Park Road', 'Mustafa Abad', 'Madina Town', 'Irrigation Cooperative Housing Society', 'Suparco Road', 'Central Park Housing Scheme', 'Kareem City', 'Sohan Valley', 'Palm City', 'Al-Noor Colony', 'Quaid-e-Azam Colony', 'Cutchi Memon Cooperative Housing Society', 'Himat Pura', 'Malik Colony', 'Nemat Colony No 2', 'Clifton Township', '7th Avenue', 'Imam Bara Road', 'Iqbal Avenue', 'Chaklala', 'Chapal Courtyard', 'Band Road', 'Rasool Park', 'Malik Park', 'Ahmad Abad', 'Javed Colony - Ghazi Road', 'Gujjarpura', 'Al-Jannat Housing Society - Kahna', 'Nasirabad', 'Asif Town', 'Mominpur', 'G-9', 'Faisal Town', 'D Type Colony', 'Race Course Road', 'Marwa Town', 'I-13', 'UMT Society', 'Gulshan-e-Shamal', 'Islamabad Expressway', 'Al-Hamd Park', 'Abdul Sattar Edhi Road', 'Emaar Canyon Views', 'Madan Pura', 'Lalukhet', 'Chak 208 Road', 'Karachi Golf City', 'Hilal Road', 'Khayaban-e-Iqbal', 'Frash Town', 'Al Kareem Garden', 'Kamala Abad', 'Salli Town', 'Raheem Gardens', 'CBR Town', 'Jamshed Road', 'G-15', 'Elite Town', 'Punjab Small Industries Colony', 'Chaklala Scheme', 'Karachi, Sindh', 'Mohallah Raja Sultan', 'Rang Mahal', 'Al Najaf Colony', 'Nisbat Road', 'Walton Road', 'Shakrial', 'Shadman Colony', 'Khayaban Gardens', 'Peoples Colony No 1', 'Banni Chowk', 'Ghaziabad', 'Shahbaz Town', 'Ghousia Colony', 'Cooper Road', 'Jubilee Town', 'Gawala Colony', 'Heaven Homes', 'Shahra-e-Usman', 'Khurianwala', 'Katar Bund Road', 'Sodiwal', 'Jumma Market', 'Taj Residencia', 'Excise & Taxation Housing Scheme', 'Shahrah-e-Pakistan', 'Samarzar Housing Society', 'Akbar Chowk', 'Bilal Nagar', 'Raja Park', 'Khurram Colony', 'Bahar Shah Road', 'Shadab Garden', 'Chaudhary Park', 'Malir', 'Gulzar-e-Quaid Housing Society', 'Gulistan-e-Malir', 'Margalla Town', 'Mansoorah', 'Swan Garden', 'Sargodha Road', 'Riaz ul Jannah', 'Shahpur', 'Tulsa', 'Shiraz Villas', 'Mohammad Nagar', 'Faiz Bagh', 'Gulshan-e-Lahore', 'Kareem Garden', 'DAV College Road', 'Japan Road', 'Saidpur', 'Khanna Road', 'M. A. Jinnah Road', 'DHA Defence', 'Gobind Pura', 'Awan Town', 'Hajvery Housing Scheme', 'Faizabad', 'Mohafiz Town', 
                                    'Umer Valley', 'Al Hamad Colony', 'Shera Kot', 'Dogech', 'Khayaban-e-Sir Syed', 'Nazimabad Villas', 'Mateen Garden', 'Acro Green - Bankers Avenue', 'Bethsaida Colony', 'Umer Garden', 'Omega Homes', 'Peoples Colony', 'Rawal Enclave', 'Yasrab Colony', 'Kohati Bazar', 'Numaish Chowrangi', 'Ali Town', 'Nayyab Villas', 'Samundari Road', 'IEP Engineers Town', 'Gulraiz Housing Scheme', 'Dhoke Banaras Road', 'Yousaf Town', 'Mohan Pura', 'Yousaf Colony', 'Lalazaar Garden', 'Circular Road', 'Askari 1'])
    property_type = st. sidebar.selectbox("Tipe Properti", ['Flat', 'House', 'Penthouse', 'Lower Portion', 'Upper Portion', 'Room', 'Farm House'])
    purpose = st. sidebar.selectbox("Tujuan", ['For Sale', 'For Rent'])
    return pd.DataFrame({
    'area': [area],
    'bedrooms': [bedrooms],
    'bathrooms': [bathrooms],
    'city': [city],
    'location': [location],
    'property_type': [property_type],
    'purpose': [purpose]
    })

# input data for predictions
input_data = user_input_features()

# Button trigger in sidebar
if st.sidebar.button("Generate Prediction", type='primary', icon='ðŸŽ¯'):
    with st.spinner(text="Predicting..."):

        # encode
        data = pd.get_dummies(input_data, columns=['property_type', 'location', 'city', 'purpose'], drop_first=True)

        # scaler
        all_columns = scaler.feature_names_in_  # Use scaler's feature ordering
        for col in all_columns:
            if col not in data.columns:
                data[col] = 0  # Add missing columns with zero values
        data = data[all_columns]

        # Scale the data
        scaled_data = scaler.transform(data)

        # Get Predictions
        rf_prediction = map_number_to_category(rf_model.predict(scaled_data)[0])
        xgb_prediction = map_number_to_category(xgb_model.predict(scaled_data)[0])
        nn_prediction = map_number_to_category(np.argmax(nn_model.predict(scaled_data), axis=1)[0])

        # Get class probabilities (for models that support it)
        rf_probs = rf_model.predict_proba(scaled_data)[0]  # Probability of each class for Random Forest
        xgb_probs = xgb_model.predict_proba(scaled_data)[0]  # Probability of each class for XGBoost
        nn_probs = nn_model.predict(scaled_data)[0]  # Probabilities from Neural Network

        # Get percentage probabilities
        rf_percentage = {label: prob * 100 for label, prob in zip(label_encoder.classes_, rf_probs)}
        xgb_percentage = {label: prob * 100 for label, prob in zip(label_encoder.classes_, xgb_probs)}
        nn_percentage = {label: prob * 100 for label, prob in zip(label_encoder.classes_, nn_probs)}

    # Display predictions
    st.subheader("Hasil Prediksi")
    st.write("Hasil prediksi model-model yang telah dilatih ditunjukkan sebagai berikut:")

    col1, col2, col3 = st.columns(3)

    with col1:
        st.subheader(":red[Random Forest]")
        st.markdown(f'**{rf_prediction.upper()}**')

    with col2:
        st.subheader(":red[XGBoost]")
        st.markdown(f'**{xgb_prediction.upper()}**')

    with col3:
        st.subheader(":red[Neural Network]")
        st.markdown(f'**{nn_prediction.upper()}**')

    st.write("Dengan persentase prediksi keseluruhan kelas sebagai berikut:")

    results = pd.DataFrame({
        "Model": ["Random Forest", "XGBoost", "Neural Network"],
        "High (%)": [rf_percentage['High'], xgb_percentage['High'], nn_percentage['High']],
        "Low (%)": [rf_percentage['Low'], xgb_percentage['Low'], nn_percentage['Low']],
        "Luxury (%)": [rf_percentage['Luxury'], xgb_percentage['Luxury'], nn_percentage['Luxury']],
        "Medium (%)": [rf_percentage['Medium'], xgb_percentage['Medium'], nn_percentage['Medium']],
        "Very High (%)": [rf_percentage['Very High'], xgb_percentage['Very High'], nn_percentage['Very High']],
    })

    # Display the dataframe with full width
    st.dataframe(results.style.set_table_styles(
        [{
            'selector': 'th',
            'props': [('background-color', '#3B82F6'), ('color', 'white'), ('text-align', 'center')]
        }, {
            'selector': 'td',
            'props': [('text-align', 'center')]
        }],
    ), use_container_width=True)  # Set table to use full container width

